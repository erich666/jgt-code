%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 38 322 455 549
%%Title: /home/alext/sgi/GRID/INPAINTING/EPS/inpaint_code.eps
%%CreationDate: 3:32 PM June  2, 2003
%%Pages: 1
%%EndComments
%%BeginProlog
%%BeginResource ShowcaseResource
1 setlinejoin
/M  { moveto } bind def /S { show  } bind def
/R { rmoveto } bind def /L { lineto } bind def
/B { newpath 0 0 M 0 1 L 1 1 L 1 0 L closepath } bind def
/CS { closepath stroke } bind def
/S {
    /fixwidth exch def
    dup length /nchars exch def
    dup stringwidth pop
    fixwidth exch sub nchars div
    exch 0 exch ashow
} def
/bwproc {
	rgbproc
	dup length 3 idiv string 0 3 0
	5 -1 roll {
	add 2 1 roll 1 sub dup 0 eq
	{ pop 3 idiv 3 -1 roll dup 4 -1 roll dup
	  3 1 roll 5 -1 roll put 1 add 3 0 }
	{ 2 1 roll } ifelse
	} forall
	pop pop pop
} def
systemdict /colorimage known not {
	/colorimage {
		pop
		pop
		/rgbproc exch def
		{ bwproc } image
	} def
} if
1 1 scale
0 setlinewidth
/drawtri {
/y3 exch def
/x3 exch def
/y2 exch def
/x2 exch def
/y1 exch def
/x1 exch def
0 setgray
newpath
x1 y1 moveto
x2 y2 lineto
x3 y3 lineto
closepath
stroke
} bind def
/filltri {
/y3 exch def
/x3 exch def
/y2 exch def
/x2 exch def
/y1 exch def
/x1 exch def
newpath
x1 y1 moveto
x2 y2 lineto
x3 y3 lineto
closepath
fill
} bind def
/cliptri {
/y3 exch def
/x3 exch def
/y2 exch def
/x2 exch def
/y1 exch def
/x1 exch def
0 setgray
newpath
x1 y1 moveto
x2 y2 lineto
x3 y3 lineto
closepath
clip
} bind def
/imgscanrgb {
gsave
translate
/scandy exch def
/scandx exch def
/istr scandx 3 mul string def
scandx scandy scale
scandx scandy 8
[scandx 0 0 scandy neg 0 scandy]
{currentfile istr readhexstring pop}
false 3
colorimage
grestore
} bind def
/imgscanbw {
gsave
translate
/scandy exch def
/scandx exch def
/istr scandx string def
scandx scandy scale
scandx scandy 8
[scandx 0 0 scandy neg 0 scandy]
{currentfile istr readhexstring pop}
image
grestore
} bind def
/showcaseisoencoding [
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/space /exclam /quotedbl /numbersign
/dollar /percent /ampersand /quoteright
/parenleft /parenright /asterisk /plus
/comma /minus /period /slash
/zero /one /two /three /four /five /six /seven
/eight /nine /colon /semicolon
/less /equal /greater /question
/at /A /B /C /D /E /F /G
/H /I /J /K /L /M /N /O
/P /Q /R /S /T /U /V /W
/X /Y /Z /bracketleft
/backslash /bracketright /asciicircum /underscore
/quoteleft /a /b /c /d /e /f /g
/h /i /j /k /l /m /n /o
/p /q /r /s /t /u /v /w
/x /y /z /braceleft
/bar /braceright /asciitilde /guilsinglright
/fraction /florin /quotesingle /quotedblleft
/guilsinglleft /fi /fl /endash
/dagger /daggerdbl /bullet /quotesinglbase
/quotedblbase /quotedblright /ellipsis /trademark
/dotlessi /grave /acute /circumflex
/tilde /macron /breve /dotaccent
/dieresis /perthousand /ring /cedilla
/Ydieresis /hungarumlaut /ogonek /caron
/emdash /exclamdown /cent /sterling
/currency /yen /brokenbar /section
/dieresis /copyright /ordfeminine /guillemotleft
/logicalnot /hyphen /registered /macron
/degree /plusminus /twosuperior /threesuperior
/acute /mu /paragraph /periodcentered
/cedilla /onesuperior /ordmasculine /guillemotright
/onequarter /onehalf /threequarters /questiondown
/Agrave /Aacute /Acircumflex /Atilde
/Adieresis /Aring /AE /Ccedilla
/Egrave /Eacute /Ecircumflex /Edieresis
/Igrave /Iacute /Icircumflex /Idieresis
/Eth /Ntilde /Ograve /Oacute
/Ocircumflex /Otilde /Odieresis /multiply
/Oslash /Ugrave /Uacute /Ucircumflex
/Udieresis /Yacute /Thorn /germandbls
/agrave /aacute /acircumflex /atilde
/adieresis /aring /ae /ccedilla
/egrave /eacute /ecircumflex /edieresis
/igrave /iacute /icircumflex /idieresis
/eth /ntilde /ograve /oacute
/ocircumflex /otilde /odieresis /divide
/oslash /ugrave /uacute /ucircumflex
/udieresis /yacute /thorn /ydieresis ] def
/showcasedingbatencoding [
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef
/.notdef /a1 /a2 /a202 /a3 /a4 /a5 /a119 /a118 /a117
/a11 /a12 /a13 /a14 /a15 /a16 /a105 /a17 /a18 /a19
/a20 /a21 /a22 /a23 /a24 /a25 /a26 /a27 /a28 /a6 /a7
/a8 /a9 /a10 /a29
/a30 /a31 /a32 /a33 /a34 /a35 /a36 /a37 /a38 /a39
/a40 /a41 /a42 /a43 /a44 /a45 /a46 /a47 /a48 /a49
/a50 /a51 /a52 /a53 /a54 /a55 /a56 /a57 /a58 /a59
/a60 /a61 /a62 /a63 /a64 /a65 /a66 /a67 /a68 /a69
/a70 /a71 /a72 /a73 /a74 /a203 /a75 /a204 /a76 /a77 /a78
/a79 /a81 /a82 /a83 /a84 /a97 /a98 /a99 /a100 /.notdef
/a205 /a85 /a206 /a86 /a87 /a88 /a89 /a90 /a91 /a92 /a93
/a94 /a95 /a96
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /a101 /a102 /a103 /a104 /a106 /a107 /a108
/a112 /a111 /a110 /a109
/a120 /a121 /a122 /a123 /a124 /a125 /a126 /a127 /a128 /a129
/a130 /a131 /a132 /a133 /a134 /a135 /a136 /a137 /a138 /a139
/a140 /a141 /a142 /a143 /a144 /a145 /a146 /a147 /a148 /a149
/a150 /a151 /a152 /a153 /a154 /a155 /a156 /a157 /a158 /a159
/a160 /a161 /a163 /a164 /a196 /a165 /a192 /a166 /a167 /a168
/a169 /a170 /a171 /a172 /a173 /a162 /a174 /a175 /a176 /a177
/a178 /a179 /a193 /a180 /a199 /a181 /a200 /a182 /.notdef
/a201 /a183 /a184 /a197 /a185 /a194 /a198 /a186 /a195 /a187
/a188 /a189 /a190 /a191 /.notdef
] def
/Courier findfont
dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse} forall
  /Encoding showcaseisoencoding def
  currentdict
end
/Courier exch definefont pop
/Symbol findfont
dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse} forall
  currentdict
end
/Symbol exch definefont pop
/newfont 10 dict def
newfont begin

 /FontType 3 def
 /FontMatrix [1 0 0 1 0 0] def
 /FontBBox [0 0 1 1] def
 /Encoding 256 array def
 0 1 255 {Encoding exch /.notdef put} for

 /CharProcs 1 dict def
 CharProcs begin
 /.notdef {} def

end

 /BuildChar {
  1 0
  0 0 1 1
  setcachedevice
  exch begin
  Encoding exch get
  CharProcs exch get
  end
  exec
 } def
end
/PatternFont newfont definefont pop

%%EndResource
%%EndProlog
%%BeginSetup
%%EndSetup
%%Page: label 1
gsave
/saveit save def
gsave
gsave
gsave
matrix currentmatrix
[1 0 0 1 38 322] concat
newpath
0 0 M 0 227 L 416 227 L 416 0 L
closepath setmatrix
0 0 0 setrgbcolor
grestore
newpath
36 320 M 36 551 L 456 551 L 456 320 L
closepath clip newpath
0 0 0 setrgbcolor
matrix currentmatrix
[1 0 0 1 38 322] concat
/Courier findfont 12 scalefont setfont
0 0 0 setrgbcolor
10 217.571 M (void inpaint\(int i,) 136.8 S
146.8 217.571 M (int j\)) 43.2 S
10 205.571 M ({) 7.2 S
10 193.571 M (  Ia=0; s=0;) 86.4 S
10 181.571 M (  for \(all \(k,l\) in) 136.8 S
146.8 181.571 M ( B) 14.4 S
/Symbol findfont 10 scalefont setfont
161.2 177.971 M (e) 4.39 S
/Courier findfont 12 scalefont setfont
165.59 181.571 M (\(i,j\) such that f) 122.4 S
287.99 181.571 M (\(k,l\)!=OUTSIDE\)  ) 122.4 S
10 167.971 M (  {) 21.6 S
10 155.971 M (      r   = vector ) 136.8 S
146.8 155.971 M (from \(i,j\) to \(k,l\)) 136.8 S
283.6 155.971 M (;) 7.2 S
10 143.971 M (      dir = r * gra) 136.8 S
146.8 143.971 M (dT\(i,j\)/length\(r\);) 129.6 S
10 131.971 M (      dst = 1/\(leng) 136.8 S
146.8 131.971 M (th\(r\)*length\(r\)\);) 122.4 S
10 119.971 M (      lev = 1/\(1+) 122.4 S
132.4 119.971 M (f) 7.2 S
139.6 119.971 M (a) 7.2 S
146.8 119.971 M (b) 7.2 S
154 119.971 M (s) 7.2 S
161.2 119.971 M (\(T) 14.4 S
175.6 119.971 M (\(k,l\)-T\(i,j\)\)\);) 108 S
10 107.971 M (      w   = dir*dst) 136.8 S
146.8 107.971 M (*lev;) 36 S
10 95.9714 M (      if \(f\(k+1,l\)!) 136.8 S
146.8 95.9714 M (=OUTSIDE ) 64.8 S
211.6 95.9714 M (&& ) 21.6 S
233.2 95.9714 M (f\(k-1,l\)!=) 72 S
305.2 95.9714 M (OUTSIDE &&) 72 S
10 83.9714 M (          f\(k,l+1\)!) 136.8 S
146.8 83.9714 M (=OUTSIDE ) 64.8 S
211.6 83.9714 M (&) 7.2 S
218.8 83.9714 M (&) 7.2 S
226 83.9714 M ( f\(k,l-1\)!) 72 S
298 83.9714 M (=OUTSIDE\)) 64.8 S
10 71.9714 M (         gradI = ) 122.4 S
132.4 71.9714 M 132.4 71.9714 M (\(I) 14.4 S
146.8 71.9714 M (\(k+1,l\)-I\(k-1,l\),I\() 136.8 S
283.6 71.9714 M (k,l+1\)-I\(k,l-1\)\);  ) 136.8 S
420.4 71.9714 M (   ) 21.6 S
10 59.9714 M (      Ia += w * \(I\() 136.8 S
146.8 59.9714 M (k,l\) + gradI * ) 108 S
254.8 59.9714 M (r\);) 21.6 S
10 47.9714 M (      s  += w;) 100.8 S
10 35.9714 M (  }) 21.6 S
10 23.9714 M (  I\(i,j\) = Ia/s;) 115.2 S
10 11.9714 M (}) 7.2 S
setmatrix
grestore
grestore
showpage
saveit restore
grestore
%%EOF
